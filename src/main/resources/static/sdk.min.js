"use strict";let section42={comment:'<small>Comments by section42</small><div class="section42-output-comment"><b>{{name}}</b><p>{{comment}}</p><hr></div>',comments:'<div><label for="section42-input-name">Name</label><input type="text" id="section42-input-name" style="width: 100%;padding: 5px;"><label for="section42-input-comment">Comment</label><textarea name="" id="section42-input-comment" style="width: 100%;padding: 5px;" rows="5"></textarea><br><br><button type="button" id="section42-input-submit">Submit</button></div><hr>Comments<hr><div>{{comments}}</div>',container:"",baseUrl:"https://section42.herokuapp.com/api/",location:"",commentsList:[],submitButton:null,nameInput:document.getElementById("section42-input-name"),commentInput:document.getElementById("section42-input-comment"),addComment(t){fetch(this.baseUrl+this.location).then(t=>t.json()).then(t=>{this.insertToComments(t)})},validate:t=>(-1!==t.indexOf("?")&&(t=t.substr(0,t.indexOf("?"))),t=(t=t.split("/").join("|")).split(".").join("-")),compileComment(t,e){let n=this.comment;return n=(n=n.replace("{{name}}",t)).replace("{{comment}}",e)},updateComments(t){let e=this.comments,n="";return t.reverse(),t.forEach(t=>{n+=this.compileComment(t.username,t.comment)}),e.replace("{{comments}}",n)},insertToComments(t){this.container.innerHTML=this.updateComments(t),this.submitButton=document.getElementById("section42-input-submit"),this.location=this.validate(window.location.href);let e=this;this.submitButton.onclick=function(t){let n=document.getElementById("section42-input-name").value,i=document.getElementById("section42-input-comment").value;""!==n?""!==i?fetch(e.baseUrl+e.location,{headers:{"Content-Type":"application/json; charset=utf-8"},method:"POST",body:JSON.stringify({name:n,comment:i})}).then(t=>{e.addComment(t)}):alert("comment is Empty"):alert("name is Empty")}},start:function(t){this.location=this.validate(window.location.href),this.container=document.getElementById(t),fetch(this.baseUrl+this.location).then(t=>t.json()).then(t=>{this.insertToComments(t)})}};section42.start("section42-comments");